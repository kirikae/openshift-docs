:_mod-docs-content-type: ASSEMBLY
[id="ossm-migrating-multitenant"]
= Multitenant migration guide
include::_attributes/common-attributes.adoc[]
:context: ossm-migrating-multitenant

toc::[]

This guide is for users who are currently running a multitenant deployment of {SMProductName} {SMv2Version}, and are migrating to {SMProduct} 3.0.

[IMPORTANT]
====
If you have not completed the premigration checklists, you must complete them first before you can start migrating your deployment.
====

include::modules/ossm-migrating-a-multitenant-deployment.adoc[leveloffset=+1]
include::modules/ossm-migrating-multitenant-workloads.adoc[leveloffset=+1]

.Next steps

If you are using gateways, you must migrate them before you complete the migration process for your deployment and workloads.

* xref:../migrating-gateways/ossm-migrating-gateways.adoc#ossm-migrating-gateways[Migrating gateways]

If you are not using gateways, and have verified your mulitenant migration, you can proceed to complete the migration and remove {SMProduct} 2 resources.

* xref:../done/ossm-migrating-complete.adoc[Completing the Migration]

include::modules/ossm-migrating-multitenant-with-cert-manager.adoc[leveloffset=+1]
include::modules/ossm-migrating-multitenant-workloads-with-cert-manager.adoc[leveloffset=+1]

.Next steps

If you are using gateways, you must migrate them before you can complete the migration process for your deployment and workloads.

* xref:../migrating-gateways/ossm-migrating-gateways.adoc#ossm-migrating-gateways[Migrating gateways]

After you have migrated your gateways, you must update the `app.controller.configmapNamespaceSelector` field in your `istio-csr` deployment.

If you are not using gateways, you can complete your migration with cert-manager.

* xref:../../migrating/done/ossm-migrating-complete.adoc#ossm-migrating-complete[Completing the Migration]